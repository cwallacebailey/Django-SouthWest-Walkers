{% extends 'structure/base.html' %}

{% block content %}

<section>

    <!-- Profile Picture Section  -->

    <div class="row no-gutters">
        {% if 'placeholder' in profile.profile_picture.url %}
            <img class="col-md-3 margin-none" id="profile-picture"
                src="https://res.cloudinary.com/dkzungvzx/image/upload/c_pad,b_auto:predominant,fl_preserve_transparency//v1658827279/mendip_hills_ep6hxc.jpg">
        {% else %}
            <img class="col-md-3 margin-none" id="profile-picture" src="{{ profile.profile_picture.url }}" alt="profile-picture">
        {% endif %}

    <!-- Profile Stats Section  -->

        <div class="col-md-9 border-bottom">
            <div class="row no-gutters">
                <div class="col heading my-auto profile-info">
                    <h1 class="name">{{ profile.display_name }}</h1>
                    <h2 class="title">Here we go</h2>
                    <h3>Stat about Distance | Stat about Cairns reached</h3>
                    <h4>
                        <a href="{% url 'update_profile' profile.pk %}">Update Profile</a>
                    </h4>
                </div>
            </div>
    
    <!-- badges and awards -->

            <div class="row no-gutters badge-height">
                <ul class="list-inline social-links">
                {% if profile.instagram_url != None %}
                    <li class="list-inline-item">
                        <a target="_blank" href="{{ profile.instagram_url }}">
                        <i class="fa fa-instagram" aria-hidden="true"></i>
                        </a>
                    </li>
                {% endif %}
                {% if profile.linkedin_url != None %}
                    <li class="list-inline-item">
                        <a target="_blank" href="{{ profile.linkedin_url }}">
                        <i class="fa fa-linkedin" aria-hidden="true"></i>
                        </a>
                    </li>
                {% endif %}
                {% if profile.strava_url != None %}
                    <li class="list-inline-item">
                        <a target="_blank" href="{{ profile.strava_url }}">
                        <i class="fa fa-strava" aria-hidden="true"></i>
                        </a>
                    </li>
                {% endif %}
                </ul>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="container-fluid p-0">
        <div class="row">
            <div class="col-md-3 border-end profile-info">
                Map
            </div>
            <!-- Blog Items Arranged Below -->
            <div class="col-md-9">
                <div class="row mt-3">

                    {% for post in user_posts %}

                    {% if post.post_author.id == user.id %}
                        <div class="col-md-4 text-center">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="image-container">
                                        {% if "placeholder" in post.header_image.url %}
                                        <img class="card-img-top border"
                                            src="https://res.cloudinary.com/dkzungvzx/image/upload/c_pad,b_auto:predominant,fl_preserve_transparency//v1658827279/mendip_hills_ep6hxc.jpg">
                                        {% else %}
                                        <img class="card-img-top border" src="{{ post.header_image.url }}">
                                        {% endif %}
                                    </div>
                                        <div class="card-body">
                                        <a href="{% url 'detail' post.pk %}">{{ post.post_title }}</a> 
                                        <br>
                                        {{ post.post_author }} | {{ post.created_date |date:"d M-Y" }}
                                        <br>
                                        {{ post.post_blurb | slice:50 | safe}}
                                        <br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}